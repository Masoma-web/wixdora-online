<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ورود / ثبت نام - Wixdora Shop</title>
<style>
    :root {
        --primary:#007bff;
        --success:#28a745;
        --danger:#dc3545;
        --light:#f8f9fa;
        --dark:#343a40;
    }
    * { box-sizing:border-box; margin:0; padding:0; }
    body { font-family:Tahoma, Arial, sans-serif; background:var(--light); padding-top:70px; }

    /* Navbar */
    .navbar { background:var(--primary); color:white; padding:1rem 0; position:fixed; top:0; width:100%; z-index:1000; box-shadow:0 2px 10px rgba(0,0,0,0.1); }
    .nav-container { max-width:1200px; margin:0 auto; padding:0 15px; display:flex; justify-content:space-between; align-items:center; }
    .nav-brand { font-size:1.5rem; font-weight:bold; color:white; text-decoration:none; }
    .nav-links { display:flex; list-style:none; gap:1.5rem; }
    .nav-links a { color:white; text-decoration:none; padding:0.5rem 1rem; border-radius:5px; transition:0.3s; }
    .nav-links a:hover { background: rgba(255,255,255,0.2); }

    /* Forms */
    .form-container { width:90%; max-width:400px; margin:3rem auto; background:white; padding:2rem; border-radius:10px; box-shadow:0 4px 15px rgba(0,0,0,0.1); }
    h2 { text-align:center; margin-bottom:1.5rem; color:var(--primary); }
    label { display:block; margin-bottom:0.3rem; color:#333; }
    input { width:100%; padding:0.7rem 1rem; margin-bottom:1rem; border:1px solid #ccc; border-radius:5px; }
    button { width:100%; padding:0.75rem; background:var(--primary); color:white; border:none; border-radius:5px; cursor:pointer; font-size:1rem; transition:0.3s; }
    button:hover { background:#0056b3; }
    .toggle-link { text-align:center; margin-top:1rem; font-size:0.9rem; }
    .toggle-link a { color:var(--primary); cursor:pointer; text-decoration:none; }
    .toggle-link a:hover { text-decoration:underline; }

    .alert { background:#d4edda; color:#155724; padding:1rem; border-radius:5px; margin-bottom:1rem; display:none; text-align:center; }
</style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar">
    <div class="nav-container">
        <a href="index.html" class="nav-brand">🛍️ Wixdora Shop</a>
        <ul class="nav-links">
            <li><a href="index.html">خانه</a></li>
            <li><a href="products.html">محصولات</a></li>
            <li><a href="cart.html">سبد خرید</a></li>
            <li><a href="login.html">ورود</a></li>
        </ul>
    </div>
</nav>

<div class="form-container" id="form-container">
    <div class="alert" id="alert"></div>
    <!-- فرم ورود -->
    <div id="login-form">
        <h2>ورود</h2>
        <label for="login-email">ایمیل</label>
        <input type="email" id="login-email" placeholder="ایمیل خود را وارد کنید">
        <label for="login-password">رمز عبور</label>
        <input type="password" id="login-password" placeholder="رمز عبور">
        <button onclick="login()">ورود</button>
        <div class="toggle-link">حساب ندارید؟ <a onclick="toggleForm()">ثبت نام کنید</a></div>
    </div>

    <!-- فرم ثبت نام -->
    <div id="register-form" style="display:none;">
        <h2>ثبت نام</h2>
        <label for="reg-name">نام</label>
        <input type="text" id="reg-name" placeholder="نام خود را وارد کنید">
        <label for="reg-email">ایمیل</label>
        <input type="email" id="reg-email" placeholder="ایمیل خود را وارد کنید">
        <label for="reg-password">رمز عبور</label>
        <input type="password" id="reg-password" placeholder="رمز عبور">
        <label for="reg-password2">تایید رمز عبور</label>
        <input type="password" id="reg-password2" placeholder="تایید رمز عبور">
        <button onclick="register()">ثبت نام</button>
        <div class="toggle-link">حساب دارید؟ <a onclick="toggleForm()">ورود کنید</a></div>
    </div>
</div>

<script>
    function toggleForm() {
        document.getElementById('login-form').style.display =
            document.getElementById('login-form').style.display === 'none' ? 'block' : 'none';
        document.getElementById('register-form').style.display =
            document.getElementById('register-form').style.display === 'none' ? 'block' : 'none';
        document.getElementById('alert').style.display = 'none';
    }

    function showAlert(message) {
        const alertDiv = document.getElementById('alert');
        alertDiv.innerText = message;
        alertDiv.style.display = 'block';
        setTimeout(()=>{ alertDiv.style.display='none'; },3000);
    }

    // ذخیره کاربران در localStorage
    function register() {
        const name = document.getElementById('reg-name').value.trim();
        const email = document.getElementById('reg-email').value.trim();
        const pass = document.getElementById('reg-password').value;
        const pass2 = document.getElementById('reg-password2').value;

        if(!name || !email || !pass || !pass2){ showAlert("لطفا تمام فیلدها را پر کنید!"); return; }
        if(pass !== pass2){ showAlert("رمزها مطابقت ندارند!"); return; }

        let users = JSON.parse(localStorage.getItem('wixdora_users')) || [];
        if(users.some(u=>u.email===email)){ showAlert("این ایمیل قبلا ثبت شده است!"); return; }

        users.push({name,email,password:pass});
        localStorage.setItem('wixdora_users',JSON.stringify(users));
        showAlert("ثبت نام با موفقیت انجام شد ✅");
        toggleForm();
    }

    function login() {
        const email = document.getElementById('login-email').value.trim();
        const pass = document.getElementById('login-password').value;

        if(!email || !pass){ showAlert("لطفا تمام فیلدها را پر کنید!"); return; }

        let users = JSON.parse(localStorage.getItem('wixdora_users')) || [];
        const user = users.find(u=>u.email===email && u.password===pass);
        if(user){
            showAlert(`خوش آمدید ${user.name} ✅`);
            setTimeout(()=>{ window.location.href='index.html'; },1500);
        } else {
            showAlert("ایمیل یا رمز عبور اشتباه است!");
        }
    }
    function login() {
    const email = document.getElementById('login-email').value.trim();
    const pass = document.getElementById('login-password').value;

    if(!email || !pass){ showAlert("لطفا تمام فیلدها را پر کنید!"); return; }

    let users = JSON.parse(localStorage.getItem('wixdora_users')) || [];
    const user = users.find(u=>u.email===email && u.password===pass);
    if(user){
        localStorage.setItem('wixdora_loggedIn', JSON.stringify(user)); // ذخیره کاربر جاری
        showAlert(`خوش آمدید ${user.name} ✅`);
        setTimeout(()=>{ window.location.href='index.html'; },1500);
    } else {
        showAlert("ایمیل یا رمز عبور اشتباه است!");
    }
}

// هنگام خروج:
function logout() {
    localStorage.removeItem('wixdora_loggedIn');
    window.location.href='index.html';
}

</script>
</body>
</html>
